<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="FactureMOISr2tToulonV1" pageWidth="595" pageHeight="842" columnWidth="535" leftMargin="30" rightMargin="30" topMargin="30" bottomMargin="30">
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<import value="java.util.*"/>
	<import value="net.sf.jasperreports.engine.JasperReport"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[""]]></defaultValueExpression>
	</parameter>
	<parameter name="par_numeroFacture" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[new Integer(2011000002)]]></defaultValueExpression>
	</parameter>
	<parameter name="par_CheminModele" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[$P{SUBREPORT_DIR}]]></defaultValueExpression>
	</parameter>
	<parameter name="numeroPeriode" class="java.lang.String">
		<parameterDescription><![CDATA[C'est le numero de la période facturé. Ce paramètre pourra être récupéré dans la table batctraitement]]></parameterDescription>
		<defaultValueExpression><![CDATA["1"]]></defaultValueExpression>
	</parameter>
	<parameter name="typeRapportComptable" class="java.lang.String" isForPrompting="false">
		<parameterDescription><![CDATA[Ce paramètre pourra être remplacé par un cahamp de la table batchtraitement]]></parameterDescription>
		<defaultValueExpression><![CDATA["a"]]></defaultValueExpression>
	</parameter>
	<parameter name="par_relance" class="java.lang.String">
		<parameterDescription><![CDATA[Détermine si il y s'agit d'une facture avec renace donc on affiche le solde]]></parameterDescription>
		<defaultValueExpression><![CDATA["relance"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT DISTINCT
     redevable.`civilite` AS redevable_civilite,
     redevable.`nomRedevable` AS redevable_nomRedevable,
     redevable.`prenom` AS redevable_prenom,
     redevable.`numRue` AS redevable_numRue,
     redevable.`adresse1` AS redevable_adresse1,
     redevable.`adresse2` AS redevable_adresse2,
     redevable.`adresse3` AS redevable_adresse3,
     redevable.`ville` AS redevable_ville,
     redevable.`codePostal` AS redevable_codePostal,
     redevable.`rdCedex` AS redevable_rdCedex,
     redevable.`numRedevable` AS redevable_numRedevable,
     facture.`numeroTitre` AS facture_numeroTitre,
     facture.`dateCreation` AS facture_dateCreation,
     facture.`typeTaxe` AS facture_typeTaxe,
     facture.`idClient` AS facture_idClient,
     facture.`anneeEx` AS facture_anneeEx,
     facture.`montantTotal` AS facture_montantTotal,
     facture.`idBatchTraitement` AS facture_idBatchTraitement,
     facture.`numeroFacture` AS facture_numeroFacture,
     facture.`solde` AS facture_solde,
     imputation.`designation` AS imputation_designation,
     facture.`utiliserMontantDeSeuil` AS facture_utiliserMontantDeSeuil,
     imputation.`minimumPerception` AS imputation_minimumPerception,
     imputation.`telGestionnaire` AS imputation_telGestionnaire,
     imputation.`faxGestionnaire` AS imputation_faxGestionnaire,
     facture.`etat` AS facture_etat,
     redevable.`complementNumeroRueRedevable` AS redevable_complementNumeroRueRedevable,
     emplacementgeneral.adresse1,
     emplacementgeneral.raisonSocial,
     (SELECT sum(p.montantpayement) as acompte from lignepayement lp
			left join facture f on f.idfacture=lp.idfacture
			left join payement p on lp.idpayement=p.idpayement
			left join typepayement tp on p.idtypepayement=tp.idtypepayement
			where f.numerofacture= facture.numeroFacture
			and p.etat='valide'
			and tp.typepayement not in ('Remise','Exoneration')) as acompte,
     (SELECT  parametresmairie.`ville` FROM parametresmairie) AS villemairie,
     (SELECT parametre.`valeur` FROM parametre WHERE type LIKE 'dateDeliberation') AS dateDeliberation
FROM
     `facture` facture,
     `redevable` redevable,
     `imputation` imputation,
	emplacementgeneral emplacementgeneral,
	batchtraitement batchtraitement
WHERE
     facture.numeroFacture = $P{par_numeroFacture}
 AND redevable.numRedevable = facture.idClient
 AND imputation.libelle = facture.typeTaxe
 AND facture.`anneeEx` = `imputation`.`anneeExercice`
AND redevable.numRedevable = emplacementgeneral.numRedevable
AND facture.idBatchTraitement = batchtraitement.numeroBatchTraitement

GROUP BY redevable_numRedevable]]>
	</queryString>
	<field name="redevable_civilite" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="redevable_nomRedevable" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="redevable_prenom" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="redevable_numRue" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="redevable_adresse1" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="redevable_adresse2" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="redevable_adresse3" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="redevable_ville" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="redevable_codePostal" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="redevable_rdCedex" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="redevable_numRedevable" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="facture_numeroTitre" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="facture_dateCreation" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="facture_typeTaxe" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="facture_idClient" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="facture_anneeEx" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="facture_montantTotal" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="facture_idBatchTraitement" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="facture_numeroFacture" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="facture_solde" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="imputation_designation" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="facture_utiliserMontantDeSeuil" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="imputation_minimumPerception" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="imputation_telGestionnaire" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="imputation_faxGestionnaire" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="facture_etat" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="redevable_complementNumeroRueRedevable" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="adresse1" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="raisonSocial" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="acompte" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="villemairie" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="dateDeliberation" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<variable name="Var_montantTotal" class="java.lang.String">
		<variableExpression><![CDATA[$F{facture_montantTotal}]]></variableExpression>
	</variable>
	<variable name="MontantTotalTypeFactureParPage" class="java.lang.Double"/>
	<variable name="dateDebutPeriode" class="java.lang.String" resetType="None">
		<variableExpression><![CDATA[($P{numeroPeriode}.equals("1"))?new String("01/01/"+$F{facture_anneeEx}):($P{numeroPeriode}.equals("2"))?new String("01/04/"+$F{facture_anneeEx}):($P{numeroPeriode}.equals("3"))?new String("01/07/"+$F{facture_anneeEx}):new String("01/10/"+$F{facture_anneeEx})]]></variableExpression>
	</variable>
	<variable name="dateFinPeriode" class="java.lang.String" resetType="None">
		<variableExpression><![CDATA[($P{numeroPeriode}.equals("1"))?new String("31/03/"+$F{facture_anneeEx}):($P{numeroPeriode}.equals("2"))?new String("30/06/"+$F{facture_anneeEx}):($P{numeroPeriode}.equals("3"))?new String("30/09/"+$F{facture_anneeEx}):new String("31/12/"+$F{facture_anneeEx})]]></variableExpression>
	</variable>
	<variable name="dateExigibilite" class="java.lang.String" resetType="None">
		<variableExpression><![CDATA[($P{typeRapportComptable}.equals("t"))?new String($V{dateDebutPeriode}):new String("01/01/"+$F{facture_anneeEx})]]></variableExpression>
	</variable>
	<variable name="typePeriode" class="java.lang.String" resetType="None">
		<variableExpression><![CDATA[$P{typeRapportComptable}.equals("t")?"trimestre":"année"]]></variableExpression>
	</variable>
	<variable name="montantTotalFacture" class="java.lang.Double">
		<variableExpression><![CDATA[new Double($F{facture_montantTotal}.toString())]]></variableExpression>
	</variable>
	<variable name="soldeFature" class="java.lang.Double">
		<variableExpression><![CDATA[new Double($F{facture_solde}.toString())]]></variableExpression>
	</variable>
	<title>
		<band height="319">
			<textField isStretchWithOverflow="true" evaluationTime="Report" isBlankWhenNull="true">
				<reportElement key="TFCiviliteNomPrenom-1" stretchType="RelativeToTallestObject" x="325" y="125" width="208" height="65" isRemoveLineWhenBlank="true"/>
				<box>
					<topPen lineWidth="0.0" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" size="9" isBold="false" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[($F{redevable_civilite}.equals("")?"":$F{redevable_civilite} + " ") + $F{redevable_nomRedevable}+ " " + $F{redevable_prenom} + "\n" +
($F{redevable_numRue}.equals("")||$F{redevable_numRue}.equals("0")?"":$F{redevable_numRue} + " ") + 
($F{redevable_complementNumeroRueRedevable}.equals("")?"":$F{redevable_complementNumeroRueRedevable}+" ") +
$F{redevable_adresse1} + "\n" +
($F{redevable_adresse2}.equals("")?"":$F{redevable_adresse2}+"\n")+
($F{redevable_adresse3}.equals("")?"":$F{redevable_adresse3}+"\n")+
($F{redevable_codePostal}.equals("")?"":$F{redevable_codePostal}+ " ") +
($F{redevable_ville}.equals("")?"":$F{redevable_ville} +" ")+
($F{redevable_rdCedex}.equals("true")?" Cédex":"")]]></textFieldExpression>
			</textField>
			<line>
				<reportElement key="line-1" x="508" y="191" width="27" height="1"/>
			</line>
			<line>
				<reportElement key="line-2" x="535" y="167" width="1" height="25"/>
			</line>
			<line>
				<reportElement key="line-3" x="508" y="95" width="27" height="1"/>
			</line>
			<line>
				<reportElement key="line-4" x="535" y="95" width="1" height="25"/>
			</line>
			<line>
				<reportElement key="line-5" x="273" y="95" width="27" height="1"/>
			</line>
			<line>
				<reportElement key="line-6" x="273" y="95" width="1" height="25"/>
			</line>
			<line>
				<reportElement key="line-7" x="274" y="166" width="1" height="25"/>
			</line>
			<line>
				<reportElement key="line-8" x="274" y="191" width="27" height="1"/>
			</line>
			<staticText>
				<reportElement key="staticText-55" x="325" y="108" width="30" height="15"/>
				<textElement>
					<font fontName="Arial" size="9"/>
				</textElement>
				<text><![CDATA[Dest. ]]></text>
			</staticText>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-34" x="0" y="14" width="265" height="64"/>
				<textElement>
					<font fontName="Arial" size="9"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["SERVICES DES AFFAIRES JURIDIQUES\n" +
"RECOUVREMENT TAXES D.P. FOIRES ET MARCHES\n" +
"CS 71 407 - 83056 TOULON CEDEX\n" +
"Tél. Facturation : 04.94.36.81.80 (82.00)\n" +
"Tél. Paiement : 04.94.36.81.85 (81.86) (81.87)\n" +
"Fax : 04.94.36.82.18"]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-30" x="0" y="124" width="253" height="15"/>
				<box>
					<topPen lineWidth="0.0" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Arial" size="9" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Références : " + $F{facture_numeroFacture}.toString()]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-18" positionType="Float" x="0" y="160" width="262" height="20"/>
				<box>
					<topPen lineWidth="0.0" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Arial" size="12" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{imputation_designation}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="0" width="265" height="15"/>
				<textElement markup="none">
					<font fontName="Arial" size="12" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["MAIRIE DE "+$F{villemairie}.toUpperCase()]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-30" x="0" y="99" width="253" height="15">
					<printWhenExpression><![CDATA[new Boolean(false)]]></printWhenExpression>
				</reportElement>
				<box>
					<topPen lineWidth="0.0" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Période mensuelle du " + $V{dateDebutPeriode} + " au " + $V{dateFinPeriode}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement key="staticText-22" x="357" y="2" width="174" height="14"/>
				<textElement textAlignment="Right" markup="none">
					<font fontName="Arial" size="9"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{villemairie} + " le " + 
($P{par_relance}.equals("relance")?
 new SimpleDateFormat("dd/MM/yyyy").format(new Date())
:$F{facture_dateCreation})]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="85" width="197" height="15"/>
				<textElement>
					<font fontName="Arial" size="12" isBold="true" isItalic="true" pdfFontName="Helvetica-BoldOblique"/>
				</textElement>
				<text><![CDATA[AVIS DE PAIEMENT]]></text>
			</staticText>
			<textField>
				<reportElement key="staticText-36" stretchType="RelativeToTallestObject" x="0" y="193" width="535" height="126"/>
				<textElement textAlignment="Justified" markup="none">
					<font fontName="Arial" size="9"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["   Madame, Monsieur,"+
"   \n\n"+
"   J'ai l'honneur de vous faire connaître que vous êtes redevable des impositions détaillées ci-dessous, exigibles au " +
$F{facture_dateCreation} + " et payables à réception du présent avis, soit :\n" +
"- Par virement au compte du régisseur des emplacements, Compte Trésorerie Générale FR76 1007 1830 0000 0020 0629 712.\n"+
"- Par chèque libellé à l'ordre de Régie Emplacements et adressé au bureau Recouvrement des Taxes D.P. Mairie de Toulon,\n" + 
"CS 71 407, 83056 TOULON CEDEX.\n"+
"- En numéraire à la caisse de la régie des Emplacements, située dans le bâtiment des services Affaires Juridiques et Recouvrement des Taxes du Domaine Public - Espace Culturel des Lices, Bd Commandant Nicolas de 8h30 à 11h30 et de 13h30 à 16h00"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement key="staticText-36" x="0" y="297" width="535" height="22"/>
				<textElement textAlignment="Justified" markup="none">
					<font fontName="Arial" size="9" isItalic="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Destinataire : tout changement doit obligatoirement être signalé par écrit au bureau Recouvrement des Taxes D.P. dès réception de la présente en joignant un extrait du Registre du Commerce ou des Métiers de moins de 3 mois."]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="35" y="-20" width="162" height="20">
					<printWhenExpression><![CDATA[new Boolean(false)]]></printWhenExpression>
				</reportElement>
				<textElement/>
				<text><![CDATA[Version 23/01/2014 I.R. 3.5.1]]></text>
			</staticText>
		</band>
	</title>
	<pageHeader>
		<band height="203">
			<printWhenExpression><![CDATA[new Boolean($V{PAGE_NUMBER}.equals( new Integer(1))?false:true)]]></printWhenExpression>
			<line>
				<reportElement key="line-4" x="535" y="95" width="1" height="25"/>
			</line>
			<line>
				<reportElement key="line-1" x="508" y="191" width="27" height="1"/>
			</line>
			<staticText>
				<reportElement x="0" y="85" width="197" height="15"/>
				<textElement>
					<font fontName="Arial" size="12" isBold="true" isItalic="true" pdfFontName="Helvetica-BoldOblique"/>
				</textElement>
				<text><![CDATA[AVIS DE PAIEMENT]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" evaluationTime="Report" isBlankWhenNull="true">
				<reportElement key="TFCiviliteNomPrenom-1" stretchType="RelativeToTallestObject" x="325" y="125" width="208" height="65" isRemoveLineWhenBlank="true"/>
				<box>
					<topPen lineWidth="0.0" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" size="9" isBold="false" pdfFontName="Helvetica"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[($F{redevable_civilite}.equals("")?"":$F{redevable_civilite} + " ") + $F{redevable_nomRedevable}+ " " + $F{redevable_prenom} + "\n" +
($F{redevable_numRue}.equals("")||$F{redevable_numRue}.equals("0")?"":$F{redevable_numRue} + " ") + 
($F{redevable_complementNumeroRueRedevable}.equals("")?"":$F{redevable_complementNumeroRueRedevable}+" ") +
$F{redevable_adresse1} + "\n" +
($F{redevable_adresse2}.equals("")?"":$F{redevable_adresse2}+"\n")+
($F{redevable_adresse3}.equals("")?"":$F{redevable_adresse3}+"\n")+
($F{redevable_codePostal}.equals("")?"":$F{redevable_codePostal}+ " ") +
($F{redevable_ville}.equals("")?"":$F{redevable_ville} +" ")+
($F{redevable_rdCedex}.equals("true")?" Cédex":"")]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-30" x="0" y="124" width="253" height="15"/>
				<box>
					<topPen lineWidth="0.0" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Arial" size="9" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Références : " + $F{facture_numeroFacture}.toString()]]></textFieldExpression>
			</textField>
			<line>
				<reportElement key="line-5" x="273" y="95" width="27" height="1"/>
			</line>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-34" x="0" y="14" width="265" height="64"/>
				<textElement>
					<font fontName="Arial" size="9"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["SERVICES DES AFFAIRES JURIDIQUES\n" +
"RECOUVREMENT TAXES D.P. FOIRES ET MARCHES\n" +
"BP 1407 - 83056 TOULON CEDEX\n" +
"Tél. Facturation : 04.94.36.81.80 (82.00)\n" +
"Tél. Paiement : 04.94.36.81.85 (81.86) (81.87)\n" +
"Fax : 04.94.36.82.18"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement key="staticText-22" x="357" y="0" width="174" height="14"/>
				<textElement textAlignment="Right" markup="none">
					<font fontName="Arial" size="9"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{villemairie} + " le " + 
($P{par_relance}.equals("relance")?
 new SimpleDateFormat("dd/MM/yyyy").format(new Date())
:$F{facture_dateCreation})]]></textFieldExpression>
			</textField>
			<line>
				<reportElement key="line-3" x="508" y="95" width="27" height="1"/>
			</line>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-30" x="0" y="99" width="253" height="15">
					<printWhenExpression><![CDATA[new Boolean(false)]]></printWhenExpression>
				</reportElement>
				<box>
					<topPen lineWidth="0.0" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Période mensuelle du " + $V{dateDebutPeriode} + " au " + $V{dateFinPeriode}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-18" positionType="Float" x="0" y="160" width="262" height="20"/>
				<box>
					<topPen lineWidth="0.0" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Arial" size="12" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{imputation_designation}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement key="staticText-55" x="325" y="108" width="30" height="15"/>
				<textElement>
					<font fontName="Arial" size="9"/>
				</textElement>
				<text><![CDATA[Dest. ]]></text>
			</staticText>
			<line>
				<reportElement key="line-2" x="535" y="167" width="1" height="25"/>
			</line>
			<line>
				<reportElement key="line-6" x="273" y="95" width="1" height="25"/>
			</line>
			<line>
				<reportElement key="line-8" x="274" y="191" width="27" height="1"/>
			</line>
			<line>
				<reportElement key="line-7" x="274" y="166" width="1" height="25"/>
			</line>
			<textField>
				<reportElement x="0" y="0" width="265" height="15"/>
				<textElement markup="none">
					<font fontName="Arial" size="12" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["MAIRIE DE "+$F{villemairie}.toUpperCase()]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band/>
	</columnHeader>
	<detail>
		<band height="100">
			<subreport isUsingCache="true" runToBottom="false">
				<reportElement key="subreport-1" x="0" y="0" width="532" height="19"/>
				<subreportParameter name="par_CheminModele">
					<subreportParameterExpression><![CDATA[$P{par_CheminModele}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="par_numeroFacture">
					<subreportParameterExpression><![CDATA[$F{facture_numeroFacture}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="annee">
					<subreportParameterExpression><![CDATA[$F{facture_anneeEx}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<returnValue subreportVariable="var_MontantTotalTypeFactureParPage" toVariable="MontantTotalTypeFactureParPage"/>
				<subreportExpression class="java.lang.String"><![CDATA[$P{par_CheminModele}+ "FactureManifestationsDiversr2tToulonDetail.jasper"]]></subreportExpression>
			</subreport>
			<staticText>
				<reportElement key="staticText-33" positionType="Float" x="295" y="19" width="155" height="15">
					<printWhenExpression><![CDATA[new Boolean($V{PAGE_NUMBER}.equals( $V{PAGE_COUNT} )?true:false)]]></printWhenExpression>
				</reportElement>
				<box>
					<topPen lineWidth="0.0" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[MONTANT TOTAL A PAYER]]></text>
			</staticText>
			<textField evaluationTime="Page" pattern="#,## €0.00" isBlankWhenNull="false">
				<reportElement key="textField-25" positionType="Float" x="456" y="19" width="75" height="15" backcolor="#F0F0F0">
					<printWhenExpression><![CDATA[new Boolean($V{PAGE_NUMBER}.equals( $V{PAGE_COUNT} )?true:false)]]></printWhenExpression>
				</reportElement>
				<box>
					<topPen lineWidth="0.25" lineColor="#000000"/>
					<leftPen lineWidth="0.25" lineColor="#000000"/>
					<bottomPen lineWidth="0.25" lineColor="#000000"/>
					<rightPen lineWidth="0.25" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression class="java.lang.Double"><![CDATA[$F{facture_utiliserMontantDeSeuil}.equals( "false" )?new Double($F{facture_montantTotal}):new Double($F{facture_montantTotal}.toString())]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Page" pattern="#,## €0.00" isBlankWhenNull="false">
				<reportElement key="textField-25" positionType="Float" x="456" y="57" width="75" height="15" backcolor="#F0F0F0">
					<printWhenExpression><![CDATA[new Boolean($V{PAGE_NUMBER}.equals( $V{PAGE_COUNT} )&& $P{par_relance}.equals("relance")?true:false)]]></printWhenExpression>
				</reportElement>
				<box>
					<topPen lineWidth="0.25" lineColor="#000000"/>
					<leftPen lineWidth="0.25" lineColor="#000000"/>
					<bottomPen lineWidth="0.25" lineColor="#000000"/>
					<rightPen lineWidth="0.25" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression class="java.lang.Double"><![CDATA[$F{acompte}==null? new Double(0.00):$F{acompte}]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Page" pattern="#,## €0.00" isBlankWhenNull="false">
				<reportElement key="textField-25" positionType="Float" mode="Opaque" x="456" y="75" width="75" height="15" backcolor="#F0F0F0">
					<printWhenExpression><![CDATA[new Boolean($V{PAGE_NUMBER}.equals( $V{PAGE_COUNT} )&& $P{par_relance}.equals("relance")?true:false)]]></printWhenExpression>
				</reportElement>
				<box>
					<topPen lineWidth="0.25" lineColor="#000000"/>
					<leftPen lineWidth="0.25" lineColor="#000000"/>
					<bottomPen lineWidth="0.25" lineColor="#000000"/>
					<rightPen lineWidth="0.25" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression class="java.lang.Double"><![CDATA[$F{facture_utiliserMontantDeSeuil}.equals( "false" )?new Double($F{facture_solde}):new Double($F{facture_solde}.toString())]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement key="staticText-33" positionType="Float" x="295" y="57" width="155" height="15">
					<printWhenExpression><![CDATA[new Boolean($V{PAGE_NUMBER}.equals( $V{PAGE_COUNT} )&& $P{par_relance}.equals("relance")?true:false)]]></printWhenExpression>
				</reportElement>
				<box>
					<topPen lineWidth="0.0" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[ TOTAL ACOMPTE]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-33" positionType="Float" x="295" y="78" width="155" height="15">
					<printWhenExpression><![CDATA[new Boolean($V{PAGE_NUMBER}.equals( $V{PAGE_COUNT} )&& $P{par_relance}.equals("relance")?true:false)]]></printWhenExpression>
				</reportElement>
				<box>
					<topPen lineWidth="0.0" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[RESTE A DEVOIR]]></text>
			</staticText>
			<subreport>
				<reportElement positionType="Float" x="1" y="38" width="535" height="15">
					<printWhenExpression><![CDATA[new Boolean($V{PAGE_NUMBER}.equals( $V{PAGE_COUNT} )&& $P{par_relance}.equals("relance")?true:false)]]></printWhenExpression>
				</reportElement>
				<subreportParameter name="numeroFacture">
					<subreportParameterExpression><![CDATA[$F{facture_numeroFacture}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression class="java.lang.String"><![CDATA[$P{par_CheminModele} + "subTotalPayement.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</detail>
	<columnFooter>
		<band/>
	</columnFooter>
	<pageFooter>
		<band height="160">
			<textField isBlankWhenNull="false">
				<reportElement key="textField-30" x="409" y="104" width="79" height="14"/>
				<box>
					<topPen lineWidth="0.0" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Arial" size="9"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{facture_numeroFacture}.toString()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement key="staticText-56" x="251" y="90" width="102" height="15"/>
				<box>
					<topPen lineWidth="0.0" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Somme à Payer]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-58" x="409" y="90" width="79" height="15"/>
				<box>
					<topPen lineWidth="0.0" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Références]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="58" width="93" height="15"/>
				<textElement>
					<font fontName="Arial" size="9"/>
				</textElement>
				<text><![CDATA[Découper ici ►]]></text>
			</staticText>
			<line>
				<reportElement x="89" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="101" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="113" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="125" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="138" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="161" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="149" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="173" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="233" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="197" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="185" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="221" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="210" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="329" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="342" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="353" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="305" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="293" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="317" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="365" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="257" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="245" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="281" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="270" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="477" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="525" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="513" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="490" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="501" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="453" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="377" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="441" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="465" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="401" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="389" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="415" y="65" width="8" height="1"/>
			</line>
			<line>
				<reportElement x="429" y="65" width="8" height="1"/>
			</line>
			<textField>
				<reportElement x="9" y="74" width="279" height="15"/>
				<textElement>
					<font fontName="Arial" size="9" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Talon à joindre obligatoirement à votre paiement"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="9" y="90" width="100" height="15"/>
				<textElement>
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Nom du redevable"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="9" y="147" width="464" height="13"/>
				<textElement>
					<font fontName="Arial" size="9"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Mairie de " + $F{villemairie}.toUpperCase() + " - Service Affaires Juridiques - Recouvrement Taxes D.P. Foires et Marchés"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="9" y="104" width="240" height="14"/>
				<textElement>
					<font fontName="Arial" size="9"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[($F{redevable_civilite}.equals("")?"":$F{redevable_civilite} + " ")+
$F{redevable_nomRedevable}+ " " + $F{redevable_prenom} + "\n"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement key="staticText-36" stretchType="RelativeToTallestObject" x="0" y="17" width="429" height="35"/>
				<textElement textAlignment="Justified" markup="none">
					<font fontName="Arial" size="9"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Redevance pour occupation du domaine public,établie en apllication de la\n" +
"délibération du Consei Municipal du " + $F{dateDeliberation}+", qui a fixé les tarifs\n" +
"applicables pour l'année "+$F{facture_anneeEx}+" à compter du 1er janvier."]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report" isBlankWhenNull="false">
				<reportElement key="textField" positionType="Float" x="525" y="146" width="10" height="14"/>
				<box topPadding="3">
					<topPen lineWidth="0.0" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font fontName="Arial" size="9"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["" + $V{PAGE_NUMBER} + ""]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement key="textField" positionType="Float" x="475" y="146" width="50" height="14"/>
				<box topPadding="3">
					<topPen lineWidth="0.0" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font fontName="Arial" size="9"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Page " + $V{PAGE_NUMBER} + "  / "]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="89" y="118" width="240" height="15"/>
				<textElement>
					<font fontName="Arial" size="9" isBold="false" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{imputation_designation}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="9" y="118" width="80" height="15"/>
				<textElement>
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Type de taxe"]]></textFieldExpression>
			</textField>
			<textField pattern="#,## €0.00" isBlankWhenNull="false">
				<reportElement key="textField-28" x="249" y="104" width="102" height="14"/>
				<box>
					<topPen lineWidth="0.0" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Arial" size="9"/>
				</textElement>
				<textFieldExpression class="java.lang.Double"><![CDATA[$P{par_relance}.equals("relance")?($F{facture_utiliserMontantDeSeuil}.equals( "false" )?new Double($F{facture_solde}):new Double($F{imputation_minimumPerception}.toString())):($F{facture_utiliserMontantDeSeuil}.equals( "false" )?new Double($F{facture_montantTotal}):new Double($F{imputation_minimumPerception}.toString()))]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="1" y="133" width="535" height="15"/>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[***********************************  CHEQUES LIBELLES A L'ORDRE DE : REGIE EMPLACEMENTS  ***********************************]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="2" width="181" height="15"/>
				<textElement>
					<font fontName="Arial" size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[INFORMATIONS IMPORTANTES]]></text>
			</staticText>
		</band>
	</pageFooter>
	<summary>
		<band/>
	</summary>
</jasperReport>
