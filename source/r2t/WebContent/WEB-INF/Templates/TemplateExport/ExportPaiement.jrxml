<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ExportFacturePaiement" pageWidth="2880" pageHeight="720" columnWidth="2880" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" isIgnorePagination="true">
	<style name="style1" isDefault="true" hAlign="Center" vAlign="Middle">
		<box>
			<pen lineWidth="0.25"/>
			<topPen lineWidth="0.25"/>
			<leftPen lineWidth="0.25"/>
			<bottomPen lineWidth="0.25"/>
			<rightPen lineWidth="0.25"/>
		</box>
	</style>
	<queryString>
		<![CDATA[select DISTINCT r.numRedevable,r.nomredevable,r.prenom,r.naturejuridique,r.civilite,r.nomjf,r.actif,r.numrue as r_numrue,r.complementnumerorueredevable,r.adresse1 as r_adresse1,r.adresse2 as r_adresse2,r.adresse3 as r_adresse3,r.codepostal as r_codepostal,r.ville as r_ville,apr.libelle as r_profession,r.numtel as r_numtel,r.numportable as r_numportable,r.email as r_email,i.libelle as typetaxe,f.numeroFacture,f.anneeEx,str_to_date(f.datecreation,'%d/%m/%Y') as dateFacture,f.etat,f.montantTotal,f.solde,tp.typepayement,str_to_date(p.datepayement,'%d/%m/%Y') as datePaiement, p.montantpayement,p.idPayement,p.etat as p_etat
from redevable r 
join emplacementgeneral e on e.numRedevable=r.numRedevable 
join activiteprofession apr on r.numeroProfession=apr.code 
join activiteprofession ape on e.codePrefession=ape.code 
join imputation i on i.idImputation=e.codeType and e.anneeExerciceImputation=i.anneeExercice 
join elementfacturation el on el.numeroEmplacement=e.numero 
join article a on el.numero=a.id_ElementFacturation 
join facture f on f.idclient=r.numRedevable 
join bareme b on b.code=a.codeBareme and b.anExercice=2020
join lignefacture lf on lf.idfacture=f.numerofacture and lf.idarticle=a.id_article 
left join lignepayement lp on f.idfacture=lp.idfacture  
left join payement p on lp.idpayement=p.idpayement  
left join typepayement tp on p.idtypepayement=tp.idtypepayement  
WHERE r.numRedevable<>-1 and f.etat <> 'preFacturation'  AND r.actif = 'true' AND i.libelle ='ETALAGE' AND f.anneeEx='2020' AND f.solde!= 0 AND f.etat ='VALIDE' order by dateFacture, f.numerofacture]]>
	</queryString>
	<field name="numRedevable" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nomredevable" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="prenom" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="naturejuridique" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="civilite" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nomjf" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="actif" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="r_numrue" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="complementnumerorueredevable" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="r_adresse1" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="r_adresse2" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="r_adresse3" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="r_codepostal" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="r_ville" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="r_profession" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="r_numtel" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="r_numportable" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="r_email" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="typetaxe" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="numeroFacture" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="anneeEx" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="dateFacture" class="java.sql.Date">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="etat" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="montantTotal" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="solde" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="typepayement" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="datePaiement" class="java.sql.Date">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="montantpayement" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="idPayement" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="p_etat" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="50" splitType="Stretch">
			<staticText>
				<reportElement style="style1" mode="Opaque" x="0" y="0" width="1950" height="20" backcolor="#CCFFCC"/>
				<textElement textAlignment="Center">
					<font size="15" isBold="true"/>
				</textElement>
				<text><![CDATA[Redevable]]></text>
			</staticText>
			<staticText>
				<reportElement style="style1" mode="Opaque" x="1950" y="0" width="412" height="20" backcolor="#CCCCFF"/>
				<textElement textAlignment="Center">
					<font size="15" isBold="true"/>
				</textElement>
				<text><![CDATA[Facture]]></text>
			</staticText>
			<staticText>
				<reportElement style="style1" mode="Opaque" x="2362" y="0" width="457" height="20" backcolor="#CCFFFF"/>
				<textElement textAlignment="Center">
					<font size="15" isBold="true"/>
				</textElement>
				<text><![CDATA[Paiement]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="20" width="48" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Raison sociale]]></text>
			</staticText>
			<staticText>
				<reportElement x="48" y="20" width="52" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[No Redevable]]></text>
			</staticText>
			<staticText>
				<reportElement x="100" y="20" width="200" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Nature juridique]]></text>
			</staticText>
			<staticText>
				<reportElement x="300" y="20" width="150" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Nom ]]></text>
			</staticText>
			<staticText>
				<reportElement x="450" y="20" width="150" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Prénom ]]></text>
			</staticText>
			<staticText>
				<reportElement x="600" y="20" width="100" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Nom  de jeune fille]]></text>
			</staticText>
			<staticText>
				<reportElement x="700" y="20" width="50" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Actif]]></text>
			</staticText>
			<staticText>
				<reportElement x="750" y="20" width="50" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Numéro de voie]]></text>
			</staticText>
			<staticText>
				<reportElement x="800" y="20" width="50" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Compl de voie]]></text>
			</staticText>
			<staticText>
				<reportElement x="850" y="20" width="200" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Nom de la voie]]></text>
			</staticText>
			<staticText>
				<reportElement x="1250" y="20" width="200" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Complément adresse]]></text>
			</staticText>
			<staticText>
				<reportElement x="1050" y="20" width="200" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Complément adresse]]></text>
			</staticText>
			<staticText>
				<reportElement x="1450" y="20" width="50" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Code postal]]></text>
			</staticText>
			<staticText>
				<reportElement x="1500" y="20" width="50" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Ville]]></text>
			</staticText>
			<staticText>
				<reportElement x="2640" y="20" width="100" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Montant paiement]]></text>
			</staticText>
			<staticText>
				<reportElement x="2740" y="20" width="79" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Date de paiement]]></text>
			</staticText>
			<staticText>
				<reportElement x="1550" y="20" width="120" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Profession]]></text>
			</staticText>
			<staticText>
				<reportElement x="1750" y="20" width="80" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Tel portable]]></text>
			</staticText>
			<staticText>
				<reportElement x="1670" y="20" width="80" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Tel fixe]]></text>
			</staticText>
			<staticText>
				<reportElement x="1830" y="20" width="120" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Email]]></text>
			</staticText>
			<staticText>
				<reportElement x="1950" y="20" width="80" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Type de taxe]]></text>
			</staticText>
			<staticText>
				<reportElement x="2030" y="20" width="61" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Etat]]></text>
			</staticText>
			<staticText>
				<reportElement x="2091" y="20" width="89" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Numéro facture]]></text>
			</staticText>
			<staticText>
				<reportElement x="2180" y="20" width="90" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Montant total de la facture]]></text>
			</staticText>
			<staticText>
				<reportElement x="2270" y="20" width="92" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Date facture]]></text>
			</staticText>
			<staticText>
				<reportElement x="2535" y="20" width="105" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Type de paiement]]></text>
			</staticText>
			<staticText>
				<reportElement x="2362" y="20" width="78" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Num paiement]]></text>
			</staticText>
			<staticText>
				<reportElement x="2440" y="20" width="95" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Etat de paiement]]></text>
			</staticText>
		</band>
	</title>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band splitType="Stretch"/>
	</columnHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<textField>
				<reportElement x="0" y="0" width="48" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{civilite}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="48" y="0" width="52" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$F{numRedevable}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="100" y="0" width="200" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{naturejuridique}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="300" y="0" width="150" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{nomredevable}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="450" y="0" width="150" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{prenom}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="600" y="0" width="100" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{nomjf}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="700" y="0" width="50" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{actif}.equals("true")?"OUI":"NON"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="750" y="0" width="50" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{r_numrue}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="800" y="0" width="50" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{complementnumerorueredevable}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="850" y="0" width="200" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{r_adresse1}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="1050" y="0" width="200" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{r_adresse2}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="1250" y="0" width="200" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{r_adresse3}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="1450" y="0" width="50" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{r_codepostal}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="1500" y="0" width="50" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{r_ville}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="1550" y="0" width="120" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{r_profession}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="1670" y="0" width="80" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{r_numtel}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="1750" y="0" width="80" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{r_numportable}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="1830" y="0" width="120" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{r_email}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="1950" y="0" width="80" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{typetaxe}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="2030" y="0" width="61" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{etat}.equals("ANNULEE")?"annulé":Double.parseDouble($F{solde})==0?"payé":"impayé"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="2091" y="0" width="89" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$F{numeroFacture}]]></textFieldExpression>
			</textField>
			<textField pattern="###0.00;-###0.00">
				<reportElement x="2180" y="0" width="90" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.Double"><![CDATA[$F{montantTotal}.isEmpty()?new Double("0.00"):new Double($F{montantTotal})]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="2270" y="0" width="92" height="20"/>
				<textElement/>
				<textFieldExpression class="java.util.Date"><![CDATA[$F{dateFacture}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="2535" y="0" width="105" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{typepayement}]]></textFieldExpression>
			</textField>
			<textField pattern="###0.00;-###0.00" isBlankWhenNull="true">
				<reportElement x="2640" y="0" width="100" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.Double"><![CDATA[$F{montantpayement}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy" isBlankWhenNull="true">
				<reportElement x="2740" y="0" width="79" height="20"/>
				<textElement/>
				<textFieldExpression class="java.util.Date"><![CDATA[$F{datePaiement}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="2362" y="0" width="78" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$F{idPayement}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="2440" y="0" width="95" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{p_etat}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="42" splitType="Stretch"/>
	</summary>
</jasperReport>
